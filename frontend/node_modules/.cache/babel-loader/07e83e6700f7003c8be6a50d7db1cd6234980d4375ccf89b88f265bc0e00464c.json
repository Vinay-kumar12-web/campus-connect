{"ast":null,"code":"var _jsxFileName = \"E:\\\\campusconnect\\\\frontend\\\\src\\\\pages\\\\Messages.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport toast from 'react-hot-toast';\nimport { useAuth } from '../context/AuthContext';\nimport './Messages.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:5000');\nexport default function Messages() {\n  _s();\n  var _activeUser$name;\n  const {\n    userId\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const [conversations, setConversations] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [activeUser, setActiveUser] = useState(null);\n  const [text, setText] = useState('');\n  const messagesEndRef = useRef(null);\n\n  // Load conversation list\n  useEffect(() => {\n    axios.get('/api/messages').then(r => setConversations(r.data));\n  }, []);\n\n  // Load messages when userId param changes\n  useEffect(() => {\n    if (userId) {\n      loadChat(userId);\n    }\n  }, [userId]);\n  const loadChat = async uid => {\n    try {\n      const {\n        data\n      } = await axios.get(`/api/messages/${uid}`);\n      setMessages(data);\n      // Get user info from conversations or fetch\n      const conv = conversations.find(c => {\n        const other = c.sender._id === user._id ? c.receiver : c.sender;\n        return other._id === uid;\n      });\n      if (conv) {\n        const other = conv.sender._id === user._id ? conv.receiver : conv.sender;\n        setActiveUser(other);\n      }\n\n      // Join socket room\n      const roomId = [user._id, uid].sort().join('_');\n      socket.emit('join_room', roomId);\n      navigate(`/messages/${uid}`, {\n        replace: true\n      });\n    } catch {\n      toast.error('Failed to load messages.');\n    }\n  };\n\n  // Receive messages via socket\n  useEffect(() => {\n    socket.on('receive_message', data => {\n      setMessages(prev => [...prev, {\n        ...data,\n        sender: {\n          _id: data.senderId\n        }\n      }]);\n    });\n    return () => socket.off('receive_message');\n  }, []);\n\n  // Scroll to bottom on new messages\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!text.trim() || !userId) return;\n    const roomId = [user._id, userId].sort().join('_');\n    const msgData = {\n      roomId,\n      senderId: user._id,\n      text: text.trim(),\n      timestamp: new Date().toISOString()\n    };\n\n    // Optimistic update\n    setMessages(prev => [...prev, {\n      ...msgData,\n      sender: {\n        _id: user._id,\n        name: user.name\n      }\n    }]);\n    setText('');\n\n    // Emit to socket\n    socket.emit('send_message', msgData);\n\n    // Save to DB\n    try {\n      await axios.post('/api/messages', {\n        receiverId: userId,\n        text: msgData.text\n      });\n    } catch {\n      toast.error('Message failed to save.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page page-with-nav messages-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-layout\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            fontFamily: 'Syne',\n            fontSize: '1.1rem',\n            padding: '16px 16px 12px',\n            borderBottom: '1px solid var(--border)'\n          },\n          children: \"Messages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), conversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          style: {\n            padding: 32\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"emoji\",\n            children: \"\\uD83D\\uDCAC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '0.8rem'\n            },\n            children: \"No conversations yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this) : conversations.map(c => {\n          var _other$name, _c$text;\n          const other = c.sender._id === user._id ? c.receiver : c.sender;\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `conv-item ${userId === other._id ? 'conv-active' : ''}`,\n            onClick: () => loadChat(other._id),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avatar avatar-md\",\n              children: (_other$name = other.name) === null || _other$name === void 0 ? void 0 : _other$name[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"conv-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"conv-name\",\n                children: other.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"conv-preview\",\n                children: [(_c$text = c.text) === null || _c$text === void 0 ? void 0 : _c$text.slice(0, 35), \"...\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 19\n            }, this)]\n          }, c._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-chat\",\n        children: !userId ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-placeholder\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '3rem',\n              marginBottom: 12\n            },\n            children: \"\\uD83D\\uDCAC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontFamily: 'Syne'\n            },\n            children: \"Select a conversation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: 'var(--muted)',\n              fontSize: '0.875rem'\n            },\n            children: \"or start one from a listing page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-header\",\n            children: activeUser && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"avatar avatar-md\",\n                children: (_activeUser$name = activeUser.name) === null || _activeUser$name === void 0 ? void 0 : _activeUser$name[0]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: 700,\n                    fontSize: '0.95rem'\n                  },\n                  children: activeUser.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    color: 'var(--muted)'\n                  },\n                  children: \"College Mate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-messages\",\n            children: [messages.map((m, i) => {\n              var _m$sender;\n              const isMine = (((_m$sender = m.sender) === null || _m$sender === void 0 ? void 0 : _m$sender._id) || m.senderId) === user._id;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `msg-wrap ${isMine ? 'msg-mine' : 'msg-theirs'}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `msg-bubble ${isMine ? 'msg-bubble-mine' : 'msg-bubble-theirs'}`,\n                  children: [m.text, /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"msg-time\",\n                    children: new Date(m.createdAt || m.timestamp).toLocaleTimeString([], {\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 23\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"chat-input-form\",\n            onSubmit: sendMessage,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"chat-input\",\n              value: text,\n              onChange: e => setText(e.target.value),\n              placeholder: \"Type a message...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              disabled: !text.trim(),\n              children: \"Send \\u2192\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n_s(Messages, \"RVW6m82K+eHFfXBu8kCu8cZN60I=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = Messages;\nvar _c;\n$RefreshReg$(_c, \"Messages\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useParams","useNavigate","axios","io","toast","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","Messages","_s","_activeUser$name","userId","user","navigate","conversations","setConversations","messages","setMessages","activeUser","setActiveUser","text","setText","messagesEndRef","get","then","r","data","loadChat","uid","conv","find","c","other","sender","_id","receiver","roomId","sort","join","emit","replace","error","on","prev","senderId","off","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","e","preventDefault","trim","msgData","timestamp","Date","toISOString","name","post","receiverId","className","children","style","fontFamily","fontSize","padding","borderBottom","fileName","_jsxFileName","lineNumber","columnNumber","length","map","_other$name","_c$text","onClick","slice","marginBottom","color","fontWeight","m","i","_m$sender","isMine","createdAt","toLocaleTimeString","hour","minute","ref","onSubmit","value","onChange","target","placeholder","type","disabled","_c","$RefreshReg$"],"sources":["E:/campusconnect/frontend/src/pages/Messages.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport toast from 'react-hot-toast';\nimport { useAuth } from '../context/AuthContext';\nimport './Messages.css';\n\nconst socket = io('http://localhost:5000');\n\nexport default function Messages() {\n  const { userId } = useParams();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [conversations, setConversations] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [activeUser, setActiveUser] = useState(null);\n  const [text, setText] = useState('');\n  const messagesEndRef = useRef(null);\n\n  // Load conversation list\n  useEffect(() => {\n    axios.get('/api/messages').then(r => setConversations(r.data));\n  }, []);\n\n  // Load messages when userId param changes\n  useEffect(() => {\n    if (userId) {\n      loadChat(userId);\n    }\n  }, [userId]);\n\n  const loadChat = async (uid) => {\n    try {\n      const { data } = await axios.get(`/api/messages/${uid}`);\n      setMessages(data);\n      // Get user info from conversations or fetch\n      const conv = conversations.find(c => {\n        const other = c.sender._id === user._id ? c.receiver : c.sender;\n        return other._id === uid;\n      });\n      if (conv) {\n        const other = conv.sender._id === user._id ? conv.receiver : conv.sender;\n        setActiveUser(other);\n      }\n\n      // Join socket room\n      const roomId = [user._id, uid].sort().join('_');\n      socket.emit('join_room', roomId);\n\n      navigate(`/messages/${uid}`, { replace: true });\n    } catch { toast.error('Failed to load messages.'); }\n  };\n\n  // Receive messages via socket\n  useEffect(() => {\n    socket.on('receive_message', (data) => {\n      setMessages(prev => [...prev, { ...data, sender: { _id: data.senderId } }]);\n    });\n    return () => socket.off('receive_message');\n  }, []);\n\n  // Scroll to bottom on new messages\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    if (!text.trim() || !userId) return;\n\n    const roomId = [user._id, userId].sort().join('_');\n    const msgData = {\n      roomId,\n      senderId: user._id,\n      text: text.trim(),\n      timestamp: new Date().toISOString()\n    };\n\n    // Optimistic update\n    setMessages(prev => [...prev, { ...msgData, sender: { _id: user._id, name: user.name } }]);\n    setText('');\n\n    // Emit to socket\n    socket.emit('send_message', msgData);\n\n    // Save to DB\n    try {\n      await axios.post('/api/messages', { receiverId: userId, text: msgData.text });\n    } catch { toast.error('Message failed to save.'); }\n  };\n\n  return (\n    <div className=\"page page-with-nav messages-page\">\n      <div className=\"messages-layout\">\n\n        {/* Sidebar */}\n        <div className=\"messages-sidebar\">\n          <h2 style={{ fontFamily: 'Syne', fontSize: '1.1rem', padding: '16px 16px 12px', borderBottom: '1px solid var(--border)' }}>\n            Messages\n          </h2>\n          {conversations.length === 0 ? (\n            <div className=\"empty-state\" style={{ padding: 32 }}>\n              <div className=\"emoji\">ðŸ’¬</div>\n              <p style={{ fontSize: '0.8rem' }}>No conversations yet</p>\n            </div>\n          ) : (\n            conversations.map(c => {\n              const other = c.sender._id === user._id ? c.receiver : c.sender;\n              return (\n                <button key={c._id} className={`conv-item ${userId === other._id ? 'conv-active' : ''}`}\n                  onClick={() => loadChat(other._id)}>\n                  <div className=\"avatar avatar-md\">{other.name?.[0]}</div>\n                  <div className=\"conv-info\">\n                    <div className=\"conv-name\">{other.name}</div>\n                    <div className=\"conv-preview\">{c.text?.slice(0, 35)}...</div>\n                  </div>\n                </button>\n              );\n            })\n          )}\n        </div>\n\n        {/* Chat area */}\n        <div className=\"messages-chat\">\n          {!userId ? (\n            <div className=\"chat-placeholder\">\n              <div style={{ fontSize: '3rem', marginBottom: 12 }}>ðŸ’¬</div>\n              <h3 style={{ fontFamily: 'Syne' }}>Select a conversation</h3>\n              <p style={{ color: 'var(--muted)', fontSize: '0.875rem' }}>or start one from a listing page</p>\n            </div>\n          ) : (\n            <>\n              {/* Chat header */}\n              <div className=\"chat-header\">\n                {activeUser && (\n                  <>\n                    <div className=\"avatar avatar-md\">{activeUser.name?.[0]}</div>\n                    <div>\n                      <div style={{ fontWeight: 700, fontSize: '0.95rem' }}>{activeUser.name}</div>\n                      <div style={{ fontSize: '0.75rem', color: 'var(--muted)' }}>College Mate</div>\n                    </div>\n                  </>\n                )}\n              </div>\n\n              {/* Messages */}\n              <div className=\"chat-messages\">\n                {messages.map((m, i) => {\n                  const isMine = (m.sender?._id || m.senderId) === user._id;\n                  return (\n                    <div key={i} className={`msg-wrap ${isMine ? 'msg-mine' : 'msg-theirs'}`}>\n                      <div className={`msg-bubble ${isMine ? 'msg-bubble-mine' : 'msg-bubble-theirs'}`}>\n                        {m.text}\n                        <span className=\"msg-time\">\n                          {new Date(m.createdAt || m.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                        </span>\n                      </div>\n                    </div>\n                  );\n                })}\n                <div ref={messagesEndRef} />\n              </div>\n\n              {/* Input */}\n              <form className=\"chat-input-form\" onSubmit={sendMessage}>\n                <input\n                  className=\"chat-input\"\n                  value={text}\n                  onChange={e => setText(e.target.value)}\n                  placeholder=\"Type a message...\"\n                />\n                <button type=\"submit\" className=\"btn btn-primary\" disabled={!text.trim()}>Send â†’</button>\n              </form>\n            </>\n          )}\n        </div>\n\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}